<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surah List with Popup</title>
    <link rel="stylesheet" href="style/style.css">
</head>
<body>
<nav class="nav">
    <input type="text" placeholder="Cari Surah yang akan dihapal" id="search-input">
</nav>

<div class="container">
    <!-- Sorting Section -->

    <!-- Surah Cards -->
    <div class="card-grid" id="card-surah">
        <!--        -->
        <div class="card">
            <div class="card-left">
                <div class="number-container">
                    <div class="number">-</div>
                </div>
            </div>
            <div class="card-middle">
                <h2 class="title">Loading</h2>
                <p class="subtitle">Loading</p>
            </div>
            <div class="card-right">
                <p class="arabic">Loading</p>
                <p class="ayah-count">Loading</p>
            </div>
        </div>
        <!----><!--        -->
        <div class="card">
            <div class="card-left">
                <div class="number-container">
                    <div class="number">-</div>
                </div>
            </div>
            <div class="card-middle">
                <h2 class="title">Loading</h2>
                <p class="subtitle">Loading</p>
            </div>
            <div class="card-right">
                <p class="arabic">Loading</p>
                <p class="ayah-count">Loading</p>
            </div>
        </div>
        <!----><!--        -->
        <div class="card">
            <div class="card-left">
                <div class="number-container">
                    <div class="number">-</div>
                </div>
            </div>
            <div class="card-middle">
                <h2 class="title">Loading</h2>
                <p class="subtitle">Loading</p>
            </div>
            <div class="card-right">
                <p class="arabic">Loading</p>
                <p class="ayah-count">Loading</p>
            </div>
        </div>
        <!----><!--        -->
        <div class="card">
            <div class="card-left">
                <div class="number-container">
                    <div class="number">-</div>
                </div>
            </div>
            <div class="card-middle">
                <h2 class="title">Loading</h2>
                <p class="subtitle">Loading</p>
            </div>
            <div class="card-right">
                <p class="arabic">Loading</p>
                <p class="ayah-count">Loading</p>
            </div>
        </div>
        <!----><!--        -->
        <div class="card">
            <div class="card-left">
                <div class="number-container">
                    <div class="number">-</div>
                </div>
            </div>
            <div class="card-middle">
                <h2 class="title">Loading</h2>
                <p class="subtitle">Loading</p>
            </div>
            <div class="card-right">
                <p class="arabic">Loading</p>
                <p class="ayah-count">Loading</p>
            </div>
        </div>
        <!----><!--        -->
        <div class="card">
            <div class="card-left">
                <div class="number-container">
                    <div class="number">-</div>
                </div>
            </div>
            <div class="card-middle">
                <h2 class="title">Loading</h2>
                <p class="subtitle">Loading</p>
            </div>
            <div class="card-right">
                <p class="arabic">Loading</p>
                <p class="ayah-count">Loading</p>
            </div>
        </div>
        <!---->

    </div>
</div>

<!-- Popup, akan menuju quiz.html jika diklik OK-->
<div id="popup" class="popup">
    <div class="popup-content">
        <span class="close-btn" onclick="closePopup()">&times;</span>
        <h2 id="popup-title"></h2>
        <p id="popup-subtitle"></p>
        <form method="get" id="formQuiz">
            <input type="hidden" name="surah" id="formSurah">
            <input type="number" name="from" required min="1" id="inputFrom">
            -
            <input type="number" name="to" required min="3" id="inputTo">
            <p></p>
            <button type="submit">OK</button>
        </form>
    </div>
</div>

<footer>
    <div class="kiri">

        <h2>Quiz Quran</h2>
        <p>Quiz Quran adalah website untuk mempermudah dalam menghafal Al-Quran. Disini Hafidz Quran dapat menghafal
            Al-Quran melalui quiz-quiz yang diberikan. Sehingga menghafal Alquran tidak terasa jenuh. Namun justru dapat
            memberi kesenangan. Melalui Website ini Hafidz Quran dapat mengetes hafalan al-quran mereka kapan pun dan
            dimana pun.</p>
    </div>
    <div class="kanan">
        <h2>Pengembang</h2>
        <p>Atik Ahnafi Sulthon <br>Muhammad Syahrial Hipdi</p>
    </div>
</footer>
<script src="script/jquery-3.7.1.min.js"></script>
<script src="script/script.js"></script>
<script>
    $(document).ready(async function () {
        await getListSurah();
    });

    $(document).ready(function () {
        $("#search-button").on("click", function () {
            const searchTerm = $("#search-input").val();
            $(".card").each(function () {
                const surahName = $(this).data("name");
                if (surahName.includes(searchTerm)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });
        $("#search-input").on("keyup", function () {
            const searchTerm = $(this).val();
            $(".card").each(function () {
                const surahName = $(this).data("name");
                if (surahName.includes(searchTerm)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });
    });

    $("#formQuiz").on("submit", async function (e) {
        e.preventDefault();
        const urlParams = new URLSearchParams(window.location.search);

        // const surah = parseInt(urlParams.get('surah'));
        // const from = parseInt(urlParams.get('from'));
        // const to = parseInt(urlParams.get('to'));

        const surah = $("#formSurah").val()
        const from = $("#inputFrom").val()
        const to = $("#inputTo").val()

        console.log(surah, from, to)

        await getSurah(parseInt(surah), parseInt(from), parseInt(to));
    });

</script>
</body>
</html>
